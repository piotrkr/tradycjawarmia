@use 'variables' as *;

// Kontener dla sekcji aktualności – dodaj w HTML klasę .news-container
.news-container {
	container-type: inline-size;
	container-name: news;
}

.news-section {
	position: relative;
	background-image: url('/img/swirl.png');
	background-attachment: fixed;
	padding-bottom: 2em;
	cursor: pointer;
	overflow: hidden;

	.container {
		position: relative;
		max-width: 1200px;
		margin: 0 auto;
	}

	.section-title {
		position: relative;
		text-align: center;
		font-family: $font-main-title;
		font-size: 3rem;
		margin-bottom: 50px;
		color: #462f20;
		letter-spacing: 0.3rem;
		padding: 0.5em 1em;
	}

	.news-carousel {
		position: relative;
		overflow: hidden;

		&__prev,
		&__next {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			background: white;
			border: none;
			width: 50px;
			height: 50px;
			border-radius: 50%;
			cursor: pointer;
			z-index: 10;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
			transition: background 0.3s ease, transform 0.2s ease;

			&:hover {
				background: #f0f0f0;
				transform: translateY(-50%) scale(1.1);
			}

			&.disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}
		}

		&__prev {
			left: 10px;
		}

		&__next {
			right: 10px;
		}
	}

	// Kluczowa zmiana: scroll-snap dla idealnego centrania kart
	.news-grid {
		display: flex;
		gap: 30px;
		overflow-x: auto; // zmienione z hidden na auto – potrzebne do scroll-snap
		scroll-behavior: smooth;
		padding: 10px 0;

		// Ukrycie paska przewijania
		-ms-overflow-style: none;
		scrollbar-width: none;
		&::-webkit-scrollbar {
			display: none;
		}

		// Scroll snap – wymusza zatrzymanie dokładnie na jednej karcie
		scroll-snap-type: x mandatory;

		> * {
			scroll-snap-align: center; // każda karta centruję się idealnie
			flex-shrink: 0; // zapobiega zmniejszaniu kart
		}
	}

	.news-card {
		min-width: 340px;
		max-width: 340px;
		flex: 0 0 340px;
		background: white;
		border-radius: 12px;
		overflow: hidden;
		box-shadow: $card-shadow;
		transition: transform 0.3s ease, box-shadow 0.3s ease;

		&:hover {
			transform: translateY(-10px);
			box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
		}

		&__image {
			width: 100%;
			height: 220px;
			object-fit: cover;
		}

		&__content {
			padding: 20px;
			text-align: center;

			.date {
				font-family: $font-text;
				font-size: 0.9rem;
				color: #888;
				margin-bottom: 10px;
				display: block;
			}

			h3 {
				font-size: 1.4rem;
				font-family: $font-text;
				margin: 0 0 15px 0;
				color: #462f20;
			}

			p {
				font-family: $font-text;
				line-height: 1.6;
				margin-bottom: 20px;
				color: #462f20;
			}

			a {
				display: inline-block;
				font-family: $font-text;
				font-weight: 600;
				color: #462f20;
				text-decoration: none;
				border-bottom: 2px solid transparent;
				transition: border-color 0.3s ease;

				&:hover {
					border-color: #462f20;
				}
			}
		}
	}

	// Container queries

	@container news (max-width: 1199px) {
		.news-card {
			min-width: 300px;
			max-width: 300px;
			flex: 0 0 300px;
		}
	}

	// Smartfony – jedna karta idealnie na środku
	@container news (max-width: 767px) {
		.news-grid {
			// Dodatkowy padding boczny, aby karta była idealnie wyśrodkowana
			padding-left: max(20px, calc((100% - (100% - 40px)) / 2));
			padding-right: max(20px, calc((100% - (100% - 40px)) / 2));
			gap: 40px;
		}

		.news-card {
			min-width: calc(100% - 40px);
			max-width: calc(100% - 40px);
			flex: 0 0 calc(100% - 40px);
		}

		.news-carousel {
			&__prev,
			&__next {
				width: 40px;
				height: 40px;
			}
		}
	}

	// Bardzo wąskie smartfony (iPhone 5/SE)
	@container news (max-width: 359px) {
		.news-grid {
			padding-left: 15px;
			padding-right: 15px;
			gap: 30px;
		}

		.news-card {
			min-width: calc(100% - 30px);
			max-width: calc(100% - 30px);
			flex: 0 0 calc(100% - 30px);
		}

		.section-title {
			font-size: 1.8rem;
			letter-spacing: 0.2rem;
			padding: 0.5em 0.5em;
			margin-bottom: 30px;
		}

		.news-carousel {
			&__prev,
			&__next {
				width: 35px;
				height: 35px;
			}
		}
	}

	@container news (max-width: 479px) {
		.section-title {
			font-size: 2rem;
		}
	}
}
